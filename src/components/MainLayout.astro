---
import "../styles/global.css";
import App from "./App";

export interface Props {
  title?: string;
}

const { title = "Astro" } = Astro.props;
---

<!--
  MainLayout.astro
  
  Root layout component for all pages in the application.
  
  Hydration Strategy:
  - Uses client:only="react" directive for App component
  - This prevents server-side rendering (SSR) of React components
  - All React components hydrate client-side only
  
  Why client:only?
  - Wallet state depends on browser APIs (localStorage, wallet extensions)
  - These APIs are not available during SSR
  - client:only ensures React tree renders only in browser
  - Prevents hydration mismatches between server and client
  
  Benefits:
  - No SSR/hydration mismatch errors
  - Wallet state can safely access localStorage
  - Wallet extensions can be detected properly
  - Consistent rendering between initial load and hydration
  
  Trade-offs:
  - Slightly slower initial render (no SSR HTML)
  - But ensures wallet functionality works reliably
  - For wallet-heavy apps, this is the right choice
-->
<html lang="en" transition:animate="fade">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="preload" as="image" href="/dolphinder-logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>
  <body class="dark">
    <!-- 
      App component with client:only="react" directive
      - Ensures React hydration happens client-side only
      - Prevents SSR-related issues with wallet state
      - transition:persist maintains state during page transitions
    -->
    <App client:only="react" transition:persist>
      <slot />
    </App>
  </body>
</html>
