---
import { loadDevelopers } from "../../data/loadDevs";
import MainLayout from "../../components/MainLayout.astro";
import ProfileCard from "../../components/shared/ProfileCard";
import OnchainProfile from "../../components/onchain/OnchainProfile";

export async function getStaticPaths() {
  const developers = await loadDevelopers();

  return developers.map(dev => ({
    params: { username: dev.username },
    props: { dev },
  }));
}

const { dev } = Astro.props;
---

<MainLayout title={`${dev.name} - Developer Profile`}>
  <div class="min-h-screen pt-16">
    <div class="container mx-auto px-4 py-8">
      <!-- Profile Card -->
      <div class="max-w-2xl mx-auto">
        <div class="bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-8 text-center">
          <div id="static-profile" style="display:none">
            <ProfileCard
              client:only="react"
              variant="offchain"
              name={dev.name}
              username={dev.username}
              avatar={dev.avatar}
              bio={dev.bio}
              github={dev.github}
              linkedin={dev.linkedin}
              website={dev.website}
              walletAddress={dev.slushWallet}
            />
          </div>

          <!-- On-chain profile overlay (Walrus JSON) -->
          <div id="onchain-profile">
            <OnchainProfile client:only="react" username={dev.username} />
          </div>
        </div>
      </div>
    </div>
  </div>
</MainLayout>
